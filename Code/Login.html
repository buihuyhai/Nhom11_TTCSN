<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng nhập</title>
    <link rel="stylesheet" href="base.css">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="./assets/fonts-icon/themify-icons/themify-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" >
    <link rel="stylesheet" href="./assets/font/fontawesome-free-5.15.4-web/css/all.min.css">
</head>
<body>
    <div class="web">
        <header class="header">
            <div class="logo">
                <img src="anh3.png" alt="loading" width="80px">
            </div>
            <div class="grid">
                <div class="header-nav">
                    <div style="line-height: 0.3; margin-top: 20px">
                        <h1><a href="" class="header-name" style="text-decoration: none;">TimtroHaNoi.com</a></h1>
                        <h3>Web tìm trọ uy tín!</h3>
                    </div>
                    <div class="box">
                        <div class="search_down">
                            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
                            <input class="text_search" type="text" placeholder="Nhập thông tin phòng trọ bạn muốn thuê">
                            <button type="submit"><i class="fa fa-search"></i></button> 
                        </div>
                    </div>
                    <div class="header-nav--btn">
                        <a href="./login.html" class="btn">Đăng nhập</a>
                        <a href="./signin.html" class="btn">Đăng ký</a>
                        <a href="" class="btn btn-post" onClick="tbdangnhap();">Đăng bài mới
                            <i class="ti-pencil-alt"></i>
                        </a>
                    </div>
                </div>
                <div class="navbar-menu ">
                    <ul class="menu-main">
                        <li class="menu-main--item">
						<a href="indexBefore.html">Trang chủ</a></li>
                        <li class="menu-main--item" onClick="tbdangnhap();"><a href="">Nhà cho thuê</a></li>
                        <li class="menu-main--item" onClick="tbdangnhap();"><a href="">Cho thuê phòng trọ</a></li>
                        <li class="menu-main--item" onClick="tbdangnhap();"><a href="">Thuê mặt bằng</a></li>
                        <li class="menu-main--item"><a href="postingInstructions.html" onClick="tbdangnhap();">Hướng dẫn</a></li>
                        <li class="menu-main--item"><a href="" onClick="tbdangnhap();">Nạp tiền</a></li>
                    </ul>
                </div>
            </div>
        </header>
        <section class="content-login">
            <div class="form-login">
                <div class="form-header">
                    <p> Đăng nhập</p>
                </div>
                <div class="form-info">
                    Số điện thoại
                </div>
                <div class="form-input">
                    <input type="text" id="phone-input">
                    <span id="phone-error" class="error-message"></span>
                </div>
                <div class="form-info">Mật khẩu</div>
                <div class="form-input">
                    <input type="password" id="password-input">
                    <span id="password-error" class="error-message"></span>
                </div>
                <div class="btn-login">
                    <button onclick="validateForm()">Đăng nhập</button>
                </div>
                <div class="form-help">
                    <a href="">Bạn quên mật khẩu?</a>
                </div>
                <div class="form-help form-helop--signin">
                    <a href="signin.html">Tạo tài khoản mới</a>
                </div>
            </div>
        </section>
        <footer>
            <div class="footer-contact">
                <img src="anh1.jpg" alt="" width="34%">
            </div>
            <div class="footer-contact--social">
                <p>Liên hệ với chúng tôi</p>
                <i class="fa-brands fa-facebook"></i>
                <i class="fa-brands fa-youtube"></i>
                <i class="fa-brands fa-instagram"></i>
                <i class="fa-brands fa-twitter"></i>
                <i class="fa-solid fa-phone"></i>
            </div>
            <div class="footer-contact--pay">
                <p>Phương thức thanh toán</p>
                <img src="anh2.jpg" alt="" width="50%">
            </div>
        </footer>
    </div>

    <script language="javascript">
    var invalidLoginCount = 0; // Số lần đăng nhập không hợp lệ
    var lastInvalidLoginTime = 0; // Thời gian lần đăng nhập không hợp lệ cuối cùng

    function tbdangnhap() {
        alert('Hãy đăng nhập để thực hiện thao tác!');
    }

    function validateForm() {
        var phoneInput = document.getElementById('phone-input');
        var passwordInput = document.getElementById('password-input');
        var phoneError = document.getElementById('phone-error');
        var passwordError = document.getElementById('password-error');

        // Reset error messages
        phoneError.innerHTML = "";
        passwordError.innerHTML = "";

        // Phone number validation
        var phoneRegex = /^[0-9]{10}$/;
        if (!phoneRegex.test(phoneInput.value)) {
            phoneError.innerHTML = "Số điện thoại không hợp lệ";
            handleInvalidLogin();
            return false;
        }

        // Password validation
        if (passwordInput.value.length < 6) {
            passwordError.innerHTML = "Mật khẩu phải có ít nhất 6 ký tự";
            handleInvalidLogin();
            return false;
        }

        // Redirect to indexAfter.html
        window.location.href = "indexAfter.html";
    }

    function handleInvalidLogin() {
        var currentTime = new Date().getTime();

        // Kiểm tra nếu đã vượt quá thời gian chờ 10 phút
        if (currentTime - lastInvalidLoginTime > 10 * 60 * 1000) {
            // Reset số lần đăng nhập không hợp lệ
            invalidLoginCount = 1;
            lastInvalidLoginTime = currentTime;
        } else {
            // Tăng số lần đăng nhập không hợp lệ
            invalidLoginCount++;

            // Kiểm tra nếu đã vượt quá số lần đăng nhập không hợp lệ cho phép
            if (invalidLoginCount > 5) {
                var remainingTime = Math.ceil((lastInvalidLoginTime + 10 * 60 * 1000 - currentTime) / 1000);
                alert('Bạn đã vượt quá số lần đăng nhập không hợp lệ cho phép. Vui lòng thử lại sau ' + remainingTime + ' giây.');
                return false;
            }
        }
    }
</script>

</body>
</html>
